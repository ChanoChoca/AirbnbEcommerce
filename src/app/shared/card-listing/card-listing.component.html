<div class="card relative cursor-pointer">
  <div (click)="onClickCard(cardMode === 'booking' ? bookingListing?.listingPublicId! : cardListing?.publicId!)">
    <div *ngIf="listing?.cover?.file"
         class="border-1 border-transparent border-round-3xl bg-cover bg-center bg-no-repeat h-24rem w-full"
         [style.background-image]="listing?.cover?.file && listing.cover.fileContentType ? 'url(data:' + listing.cover.fileContentType + ';base64,' + listing.cover.file + ')' : ''">
    </div>
    <div class="mt-2 font-bold">{{ listing?.location }}</div>

    <ng-container *ngIf="cardMode === 'booking'; else elseBooking">
      <div>{{ bookingListing?.dates?.startDate | date: 'mediumDate' }} - {{ bookingListing?.dates?.endDate | date: 'mediumDate' }}</div>
      <div class="mt-2">
        <span class="font-bold">{{ bookingListing?.totalPrice?.value | currency }}</span>
      </div>
    </ng-container>
    <ng-template #elseBooking>
      <div>{{ categoryService.getCategoryByTechnicalName(cardListing?.bookingCategory!)?.displayName }}</div>
      <div class="mt-2">
        <span class="font-bold">{{ cardListing?.price?.value! | currency }}</span>
      </div>
    </ng-template>
  </div>

  <ng-container *ngIf="cardMode === 'landlord'">
    <button [disabled]="cardListing?.loading" class="absolute trash-btn p-button" (click)="onDeleteListing(cardListing!)">
      <ng-container *ngIf="cardListing?.loading; else elseLandlord">
        <fa-icon icon="circle-notch" animation="spin"></fa-icon>
      </ng-container>
      <ng-template #elseLandlord>
        <fa-icon icon="trash-can"></fa-icon>
      </ng-template>
    </button>
  </ng-container>

  <ng-container *ngIf="cardMode === 'booking'">
    <button [disabled]="bookingListing?.loading" class="absolute trash-btn p-button" (click)="onCancelBooking(bookingListing!)">
      <ng-container *ngIf="bookingListing?.loading; else elseBookingButton">
        <fa-icon icon="circle-notch" animation="spin"></fa-icon>
      </ng-container>
      <ng-template #elseBookingButton>
        <fa-icon icon="trash-can"></fa-icon>
      </ng-template>
    </button>
  </ng-container>
</div>

<!--<div class="card relative cursor-pointer">-->
<!--  <div (click)="onClickCard(cardMode() === 'booking' ? bookingListing?.listingPublicId! : cardListing?.publicId!)">-->
<!--    <div class="border-1 border-transparent border-round-3xl bg-cover bg-center bg-no-repeat h-24rem w-full"-->
<!--         [style.background-image]="'url(' + 'data:' + listing().cover.fileContentType + ';base64,' + listing().cover.file + ')'">-->
<!--    </div>-->
<!--    <div class="mt-2 font-bold">{{ listing().location }}</div>-->


<!--    @if (cardMode() === 'booking') {-->
<!--    <div>{{ bookingListing?.dates?.startDate | date: "mediumDate" }} - -->
<!--    {{ bookingListing?.dates?.endDate | date: "mediumDate" }}-->
<!--    </div>-->
<!--    <div class="mt-2">-->
<!--      <span class="font-bold">{{ bookingListing?.totalPrice?.value | currency }}</span>-->
<!--      </div>-->
<!--    } @else {-->
<!--    <div>{{ categoryService.getCategoryByTechnicalName(cardListing?.bookingCategory!)?.displayName }}</div>-->
<!--      <div class="mt-2">-->
<!--        <span class="font-bold">{{ cardListing?.price?.value! | currency }}</span>-->
<!--      </div>-->
<!--    }-->
<!--  </div>-->
<!--  @if (cardMode() === "landlord") {-->
<!--  <button [disabled]="cardListing?.loading" class="absolute trash-btn p-button"-->
<!--          (click)="onDeleteListing(cardListing!)">-->
<!--    @if (cardListing?.loading) {-->
<!--  <fa-icon icon="circle-notch" animation="spin"></fa-icon>-->
<!--  } @else {-->
<!--  <fa-icon icon="trash-can"></fa-icon>-->
<!--  }-->
<!--  </button>-->
<!--  }-->

<!--  @if (cardMode() === "booking") {-->
<!--  <button [disabled]="bookingListing?.loading" class="absolute trash-btn p-button"-->
<!--          (click)="onCancelBooking(bookingListing!)">-->
<!--    @if (bookingListing?.loading) {-->
<!--  <fa-icon icon="circle-notch" animation="spin"></fa-icon>-->
<!--  } @else {-->
<!--  <fa-icon icon="trash-can"></fa-icon>-->
<!--  }-->
<!--  </button>-->
<!--  }-->
<!--</div>-->
